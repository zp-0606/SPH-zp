{"ast":null,"code":"import _asyncToGenerator from \"E:/VueProject/project-SPH/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"E:/VueProject/project-SPH/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Trade\",\n  data: function data() {\n    return {\n      msg: \"\",\n      orderId: \"\"\n    };\n  },\n  mounted: function mounted() {\n    this.$store.dispatch(\"getAddressInfo\");\n    this.$store.dispatch(\"getUserOrderInfo\");\n  },\n  computed: _objectSpread(_objectSpread({}, mapState({\n    addressInfo: function addressInfo(state) {\n      return state.trade.addressInfo;\n    },\n    orderInfo: function orderInfo(state) {\n      return state.trade.userOrderInfo;\n    }\n  })), {}, {\n    userDefaultAddress: function userDefaultAddress() {\n      return this.addressInfo.find(function (item) {\n        return item.isDefault == 1;\n      }) || {};\n    }\n  }),\n  methods: {\n    changeDefaultAddress: function changeDefaultAddress(address, addressInfo) {\n      addressInfo.forEach(function (item) {\n        return item.isDefault = 0;\n      });\n      address.isDefault = 1;\n    },\n    submitOrder: function submitOrder() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var tradeNo, data, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                tradeNo = _this.orderInfo.tradeNo;\n                data = {\n                  consignee: _this.userDefaultAddress.consignee,\n                  consigneeTel: _this.userDefaultAddress.phoneNum,\n                  deliveryAddress: _this.userDefaultAddress.fullAddress,\n                  paymentWay: \"ONLINE\",\n                  orderComment: _this.msg,\n                  orderDetailList: _this.orderInfo.detailArrayList\n                };\n                _context.next = 4;\n                return _this.$API.reqSubmitOrder(tradeNo, data);\n\n              case 4:\n                result = _context.sent;\n\n                if (result.code == 200) {\n                  _this.orderId = result.data;\n\n                  _this.$router.push(\"/pay?orderId=\" + _this.orderId);\n                } else {\n                  alert(result.data);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}